# Contributing

При разработке проекта следуйте назначенным в [трекере](https://github.com/orgs/routelink/projects/1) задачам. Если хотите добавить новые функциональные возможности, то лучше сначала обсудить изменения, которые вы хотите внести, с помощью issue, discussion или в группе Telegram.

## Getting started
Для того, чтобы начать разработку, выполните следующие команды:
1. `npm ci` для установки зависимостей
2. `npm start` для запуска проекта

## GitFlow

Чтобы начать разработку, склонируйте новую ветку от ветки `main`.
Для наименования веток нужно использовать префиксы типа предполагаемого коммита (см. [типы коммитов](#сommit-type)), после чего идет описание, например: `feat/add-test-auth-component`, `fix/add-missing-config` и т.п.

## Testing

Убедитесь, что ваши изменения прошли текущие тесты, а также напишите тесты для нового поведения:

- `npm test` для запуска модульных тестов

## Commits

В сообщениях коммитов **следуйте соглашению** [Conventional Commits](https://www.conventionalcommits.org/ru/v1.0.0/), например:
```
feat: improve layout of base component
fix: correct header styles
chore: update .env file up to new variables
```

### <a id="сommit-type"></a>Commit types

#### General
- `feature` — добавление новой функциональности
- `fix` —  исправление ошибок

#### Additional
- `docs` — изменения, затрагивающие документацию
- `style` — исправление опечаток, форматирования
- `refactor` — рефакторинг кода приложения
- `test` — изменения, связанные с тестированием
- `chore` — изменения, не затрагивающие исходного производственного кода
- `ci` - настройка CI и работа со скриптами
- `perf` - изменения, направленные на улучшение производительности
- `revert` - откат на предыдущие коммиты

### Rules
Для написания коммита (помимо [Conventional Commits](https://www.conventionalcommits.org/ru/v1.0.0/)) необходимо руководствоваться следующими правилами:
1. Используйте в заголовке глагол в форме инфинитива ([источник](https://habr.com/ru/companies/sberbank/articles/662744/))
2. Отделяйте заголовок от тела пустой строкой
3. Ограничивайте заголовок 50 символами
4. Переходите на следующую строку в теле на 72 символах
5. В теле отвечайте на вопросы что и почему, а не как
6. **Не** пишите заголовок с заглавной буквы
7. **Не** ставьте точку в конце заголовка
8. **Не** используйте смайлики в заголовке коммита

### Pull Request
1. Убедитесь, что вы охватываете все изменения кода модульными тестами
2. Создайте запрос на слияние вашей ветки в основную ветку репозитория `main`
3. Название PR должно отражать основную информацию о вносимых изменениях.
4. Назваие PR должно следовать соглашению [Conventional Commits](https://www.conventionalcommits.org/ru/v1.0.0/)
5. Если PR состоит из нескольких коммитов, то при слиянии будет использоваться стратегия squash

## Releases

1. Релиз выпускается по мере добавляемых функциональных возможностей, но не чаще, чем раз в неделю (за исключением hot-фиксов). Основное время выпуска в [production](https://routelink.ru) - понедельник каждой недели.
2. Оперативные изменения будут появляться в [stage](https://stage.routelink.ru) каждый раз после слияния изменений в ветку `main`
3. Для создания новых версий приложения используется [семантический подход](https://semver.org/lang/ru/)
4. Для генерации списка изменений используется утилита [standard-version](https://www.npmjs.com/package/standard-version). При ее запуске происходит следующее:
- Обновляется версия в соответствии с [Conventional Commits](https://www.conventionalcommits.org/ru/v1.0.0/) и [SemVer](https://semver.org/lang/ru/)
- Обновляется файл CHANGELOG.md
- Создается тег указывающий на новую версию
- Создается коммит с изменениями
